/*
	ARCABusinesses.h
	The implementation of properties and methods for the ARCABusinesses object.
	Generated by SudzC.com
*/
#import "ARCABusinesses.h"

#import "ARCABusinessesGallery.h"
@implementation ARCABusinesses
	@synthesize _id = __id;
	@synthesize account_id = _account_id;
	@synthesize promotion_id = _promotion_id;
	@synthesize updated = _updated;
	@synthesize entered = _entered;
	@synthesize title = _title;
	@synthesize friendly_url = _friendly_url;
	@synthesize email = _email;
	@synthesize url = _url;
	@synthesize address = _address;
	@synthesize address2 = _address2;
	@synthesize zip_code = _zip_code;
	@synthesize zip5 = _zip5;
	@synthesize latitude = _latitude;
	@synthesize longitude = _longitude;
	@synthesize maptuning = _maptuning;
	@synthesize phone = _phone;
	@synthesize fax = _fax;
	@synthesize description = _description;
	@synthesize long_description = _long_description;
	@synthesize status = _status;
	@synthesize level = _level;
	@synthesize number_views = _number_views;
	@synthesize avg_review = _avg_review;
	@synthesize map_zoom = _map_zoom;
	@synthesize reviews_amount = _reviews_amount;
	@synthesize CategoryTitle = _CategoryTitle;
	@synthesize Image = _Image;
	@synthesize BusinessesGallery = _BusinessesGallery;
	@synthesize businessULRAddress = _businessULRAddress;
	@synthesize distance = _distance;
    @synthesize imageObject = _imageObject;
    @synthesize full_address = _full_address;
    @synthesize foursquare_id = _foursquare_id;

	- (id) init
	{
		if(self = [super init])
		{
			self._id = nil;
			self.account_id = nil;
			self.promotion_id = nil;
			self.updated = nil;
			self.entered = nil;
			self.title = nil;
			self.friendly_url = nil;
			self.email = nil;
			self.url = nil;
			self.address = nil;
			self.address2 = nil;
			self.zip_code = nil;
			self.zip5 = nil;
			self.maptuning = nil;
			self.phone = nil;
			self.fax = nil;
			self.description = nil;
			self.long_description = nil;
			self.status = nil;
			self.level = nil;
			self.number_views = nil;
			self.avg_review = nil;
			self.map_zoom = nil;
			self.reviews_amount = nil;
			self.CategoryTitle = nil;
			self.Image = nil;
//			self.BusinessesGallery = nil; // [[ARCABusinessesGallery alloc] init];
			self.BusinessesGallery = [[ARCABusinessesGallery alloc] init];          
			self.businessULRAddress = nil;
			self.distance = nil;
            self.imageObject = nil;
            self.full_address = nil;
            self.foursquare_id = nil;

		}
		return self;
	}

	+ (ARCABusinesses*) newWithNode: (CXMLNode*) node
	{
		if(node == nil) { return nil; }
		return (ARCABusinesses*)[[[ARCABusinesses alloc] initWithNode: node] autorelease];
	}

	- (id) initWithNode: (CXMLNode*) node {
		if(self = [super initWithNode: node])
		{
			self._id = [NSDecimalNumber decimalNumberWithString: [Soap getNodeValue: node withName: @"id"]];
			self.account_id = [NSDecimalNumber decimalNumberWithString: [Soap getNodeValue: node withName: @"account_id"]];
			self.promotion_id = [NSDecimalNumber decimalNumberWithString: [Soap getNodeValue: node withName: @"promotion_id"]];
			self.updated = [Soap dateFromString: [Soap getNodeValue: node withName: @"updated"]];
			self.entered = [Soap dateFromString: [Soap getNodeValue: node withName: @"entered"]];
			self.title = [Soap getNodeValue: node withName: @"title"];
			self.friendly_url = [Soap getNodeValue: node withName: @"friendly_url"];
			self.email = [Soap getNodeValue: node withName: @"email"];
			self.url = [Soap getNodeValue: node withName: @"url"];
			self.address = [Soap getNodeValue: node withName: @"address"];
			self.address2 = [Soap getNodeValue: node withName: @"address2"];
			self.zip_code = [Soap getNodeValue: node withName: @"zip_code"];
			self.zip5 = [Soap getNodeValue: node withName: @"zip5"];
			self.latitude = [[Soap getNodeValue: node withName: @"latitude"] doubleValue];
			self.longitude = [[Soap getNodeValue: node withName: @"longitude"] doubleValue];
			self.maptuning = [Soap getNodeValue: node withName: @"maptuning"];
			self.phone = [Soap getNodeValue: node withName: @"phone"];
			self.fax = [Soap getNodeValue: node withName: @"fax"];
			self.description = [Soap getNodeValue: node withName: @"description"];
			self.long_description = [Soap getNodeValue: node withName: @"long_description"];
			self.status = [Soap getNodeValue: node withName: @"status"];
			self.level = [NSDecimalNumber decimalNumberWithString: [Soap getNodeValue: node withName: @"level"]];
			self.number_views = [NSDecimalNumber decimalNumberWithString: [Soap getNodeValue: node withName: @"number_views"]];
			self.avg_review = [NSDecimalNumber decimalNumberWithString: [Soap getNodeValue: node withName: @"avg_review"]];
			self.map_zoom = [NSDecimalNumber decimalNumberWithString: [Soap getNodeValue: node withName: @"map_zoom"]];
			self.reviews_amount = [NSDecimalNumber decimalNumberWithString: [Soap getNodeValue: node withName: @"reviews_amount"]];
			self.CategoryTitle = [Soap getNodeValue: node withName: @"CategoryTitle"];
			self.Image = [Soap getNodeValue: node withName: @"Image"];
			self.BusinessesGallery = [[ARCABusinessesGallery newWithNode: [Soap getNode: node withName: @"BusinessesGallery"]] object];
			self.businessULRAddress = [Soap getNodeValue: node withName: @"businessULRAddress"];
			self.distance = [NSDecimalNumber decimalNumberWithString: [Soap getNodeValue: node withName: @"distance"]];
			self.full_address = [Soap getNodeValue: node withName: @"full_address"];
            self.foursquare_id = [Soap getNodeValue: node withName: @"foursquare_id"];
		}
		return self;
	}

	- (NSMutableString*) serialize
	{
		return [self serialize: @"Businesses"];
	}
  
	- (NSMutableString*) serialize: (NSString*) nodeName
	{
		NSMutableString* s = [[NSMutableString alloc] init];
		[s appendFormat: @"<%@", nodeName];
		[s appendString: [self serializeAttributes]];
		[s appendString: @">"];
		[s appendString: [self serializeElements]];
		[s appendFormat: @"</%@>", nodeName];
		return [s autorelease];
	}
	
	- (NSMutableString*) serializeElements
	{
		NSMutableString* s = [super serializeElements];
		if (self._id != nil) [s appendFormat: @"<id xsi:type=\"xsd:decimal\">%@</id>", [NSString stringWithFormat: @"%@", self._id]];
		if (self.account_id != nil) [s appendFormat: @"<account_id xsi:type=\"xsd:decimal\">%@</account_id>", [NSString stringWithFormat: @"%@", self.account_id]];
		if (self.promotion_id != nil) [s appendFormat: @"<promotion_id xsi:type=\"xsd:decimal\">%@</promotion_id>", [NSString stringWithFormat: @"%@", self.promotion_id]];
		if (self.updated != nil) [s appendFormat: @"<updated xsi:type=\"xsd:dateTime\">%@</updated>", [Soap getDateString: self.updated]];
		if (self.entered != nil) [s appendFormat: @"<entered xsi:type=\"xsd:dateTime\">%@</entered>", [Soap getDateString: self.entered]];
		if (self.title != nil) [s appendFormat: @"<title xsi:type=\"xsd:string\">%@</title>", [[self.title stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.friendly_url != nil) [s appendFormat: @"<friendly_url xsi:type=\"xsd:string\">%@</friendly_url>", [[self.friendly_url stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.email != nil) [s appendFormat: @"<email xsi:type=\"xsd:string\">%@</email>", [[self.email stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.url != nil) [s appendFormat: @"<url xsi:type=\"xsd:string\">%@</url>", [[self.url stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.address != nil) [s appendFormat: @"<address xsi:type=\"xsd:string\">%@</address>", [[self.address stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.address2 != nil) [s appendFormat: @"<address2 xsi:type=\"xsd:string\">%@</address2>", [[self.address2 stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.zip_code != nil) [s appendFormat: @"<zip_code xsi:type=\"xsd:string\">%@</zip_code>", [[self.zip_code stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.zip5 != nil) [s appendFormat: @"<zip5 xsi:type=\"xsd:string\">%@</zip5>", [[self.zip5 stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		[s appendFormat: @"<latitude xsi:type=\"xsd:double\">%@</latitude>", [NSString stringWithFormat: @"%f", self.latitude]];
		[s appendFormat: @"<longitude xsi:type=\"xsd:double\">%@</longitude>", [NSString stringWithFormat: @"%f", self.longitude]];
		if (self.maptuning != nil) [s appendFormat: @"<maptuning xsi:type=\"xsd:string\">%@</maptuning>", [[self.maptuning stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.phone != nil) [s appendFormat: @"<phone xsi:type=\"xsd:string\">%@</phone>", [[self.phone stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.fax != nil) [s appendFormat: @"<fax xsi:type=\"xsd:string\">%@</fax>", [[self.fax stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.description != nil) [s appendFormat: @"<description xsi:type=\"xsd:string\">%@</description>", [[self.description stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.long_description != nil) [s appendFormat: @"<long_description xsi:type=\"xsd:string\">%@</long_description>", [[self.long_description stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.status != nil) [s appendFormat: @"<status xsi:type=\"xsd:string\">%@</status>", [[self.status stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.level != nil) [s appendFormat: @"<level xsi:type=\"xsd:decimal\">%@</level>", [NSString stringWithFormat: @"%@", self.level]];
		if (self.number_views != nil) [s appendFormat: @"<number_views xsi:type=\"xsd:decimal\">%@</number_views>", [NSString stringWithFormat: @"%@", self.number_views]];
		if (self.avg_review != nil) [s appendFormat: @"<avg_review xsi:type=\"xsd:decimal\">%@</avg_review>", [NSString stringWithFormat: @"%@", self.avg_review]];
		if (self.map_zoom != nil) [s appendFormat: @"<map_zoom xsi:type=\"xsd:decimal\">%@</map_zoom>", [NSString stringWithFormat: @"%@", self.map_zoom]];
		if (self.reviews_amount != nil) [s appendFormat: @"<reviews_amount xsi:type=\"xsd:decimal\">%@</reviews_amount>", [NSString stringWithFormat: @"%@", self.reviews_amount]];
		if (self.CategoryTitle != nil) [s appendFormat: @"<CategoryTitle xsi:type=\"xsd:string\">%@</CategoryTitle>", [[self.CategoryTitle stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.Image != nil) [s appendFormat: @"<Image xsi:type=\"xsd:string\">%@</Image>", [[self.Image stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		//if (self.BusinessesGallery != nil) [s appendString: [self.BusinessesGallery serialize: @"BusinessesGallery"]];
        NSArray * imagesArray = (NSArray * )self.BusinessesGallery;
		if (self.BusinessesGallery != nil) [s appendString: [ARCABusinessesGallery serialize:imagesArray withNodeName:@"BusinessesGallery"]];        
        
        
        
		if (self.businessULRAddress != nil) [s appendFormat: @"<businessULRAddress>%@</businessULRAddress>", [[self.businessULRAddress stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];
		if (self.distance != nil) [s appendFormat: @"<distance>%@</distance>", [NSString stringWithFormat: @"%@", self.distance]];
		if (self.full_address != nil) [s appendFormat: @"<full_address>%@</full_address>", [[self.full_address stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"] stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"]];

		return s;
	}
	
	- (NSMutableString*) serializeAttributes
	{
		NSMutableString* s = [super serializeAttributes];

		return s;
	}
	
	-(BOOL)isEqual:(id)object{
		if(object != nil && [object isKindOfClass:[ARCABusinesses class]]) {
			return [[self serialize] isEqualToString:[object serialize]];
		}
		return NO;
	}
	
	-(NSUInteger)hash{
		return [Soap generateHash:self];

	}
	
	- (void) dealloc
	{
		if(self._id != nil) { [self._id release]; }
		if(self.account_id != nil) { [self.account_id release]; }
		if(self.promotion_id != nil) { [self.promotion_id release]; }
		if(self.updated != nil) { [self.updated release]; }
		if(self.entered != nil) { [self.entered release]; }
		if(self.title != nil) { [self.title release]; }
		if(self.friendly_url != nil) { [self.friendly_url release]; }
		if(self.email != nil) { [self.email release]; }
		if(self.url != nil) { [self.url release]; }
		if(self.address != nil) { [self.address release]; }
		if(self.address2 != nil) { [self.address2 release]; }
		if(self.zip_code != nil) { [self.zip_code release]; }
		if(self.zip5 != nil) { [self.zip5 release]; }
		if(self.maptuning != nil) { [self.maptuning release]; }
		if(self.phone != nil) { [self.phone release]; }
		if(self.fax != nil) { [self.fax release]; }
		if(self.description != nil) { [self.description release]; }
		if(self.long_description != nil) { [self.long_description release]; }
		if(self.status != nil) { [self.status release]; }
		if(self.level != nil) { [self.level release]; }
		if(self.number_views != nil) { [self.number_views release]; }
		if(self.avg_review != nil) { [self.avg_review release]; }
		if(self.map_zoom != nil) { [self.map_zoom release]; }
		if(self.reviews_amount != nil) { [self.reviews_amount release]; }
		if(self.CategoryTitle != nil) { [self.CategoryTitle release]; }
		if(self.Image != nil) { [self.Image release]; }
		if(self.BusinessesGallery != nil) { [self.BusinessesGallery release]; }
		if(self.businessULRAddress != nil) { [self.businessULRAddress release]; }
		if(self.distance != nil) { [self.distance release]; }
		if(self.imageObject != nil) { [self.imageObject release]; }        
        if(self.full_address != nil) { [self.full_address release]; }        

		[super dealloc];
	}

#pragma mark - ListingDelegateObject Methods
-(UIImage *) listingIcon{
    return self.imageObject;    
}
-(UIImage *) listingIconDetail{
    return self.imageObject;
}
-(NSString *) imageURLString{
    return self.Image;
}

-(void) setListingIcon:(UIImage  *) image{
    [self setImageObject:image];
}
-(void) setListingIconDetail:(UIImage  *) image{
    [self setImageObject:image];    
}
-(void) setImageURLString:(NSString *) string{
    [self setImage:string];
}

#pragma mark - MKAnnotation Protocol Method
- (CLLocationCoordinate2D)coordinate;
{
	if([[self maptuning] length]>0){
		NSArray *listingMapTunnig = [self.maptuning componentsSeparatedByString: @","];
        
		double maptunningLatitude = [(NSString *)[listingMapTunnig objectAtIndex:0] doubleValue];
		double maptunningLongitude = [(NSString *)[listingMapTunnig objectAtIndex:1] doubleValue];;
		
		self.latitude = maptunningLatitude;
		self.longitude = maptunningLongitude;
	}
	
    CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(self.latitude, self.longitude);
	
    return coordinate;
}


@end
